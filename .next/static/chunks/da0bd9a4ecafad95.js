(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,642546,e=>{"use strict";e.s(["CheckCircle",()=>a],642546);let a=(0,e.i(786981).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},487486,e=>{"use strict";e.s(["Badge",()=>r]);var a=e.i(765830),s=e.i(381808),l=e.i(294237),t=e.i(975157);let i=(0,l.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function r(e){let{className:l,variant:r,asChild:n=!1,...c}=e,d=n?s.Slot:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,t.cn)(i({variant:r}),l),...c})}},523981,e=>{"use strict";e.s(["Eye",()=>a],523981);let a=(0,e.i(786981).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},336650,e=>{"use strict";e.s(["X",()=>a.default]);var a=e.i(146354)},664063,e=>{"use strict";e.s(["Mail",()=>a],664063);let a=(0,e.i(786981).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},862378,e=>{"use strict";e.s(["Shield",()=>a],862378);let a=(0,e.i(786981).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},173404,e=>{"use strict";e.s(["UserCheck",()=>a],173404);let a=(0,e.i(786981).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},464665,e=>{"use strict";e.s(["Phone",()=>a],464665);let a=(0,e.i(786981).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},888348,e=>{"use strict";e.s(["default",()=>A],888348);var a=e.i(765830),s=e.i(487486),l=e.i(519455),t=e.i(524435),i=e.i(755146),r=e.i(793479),n=e.i(658512),c=e.i(967489),d=e.i(784774),o=e.i(746798),u=e.i(894990),x=e.i(230902),h=e.i(491278),m=e.i(642546),v=e.i(523981),j=e.i(664063),g=e.i(399172),g=g,p=e.i(464665),f=e.i(36550),b=e.i(862378),y=e.i(972893),N=e.i(173404);let T=(0,e.i(786981).default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var w=e.i(336650),C=e.i(906943),S=e.i(806746);function A(){let[e,{isLoading:A}]=(0,u.useUpdateUserMutation)(),[D,I]=(0,C.useState)({page:1,limit:10}),[k,M]=(0,C.useState)({search:"",role:"all",isActive:"all",isVerified:"all"}),[P,U]=(0,C.useState)(""),[V,E]=(0,C.useState)(!1),[B,R]=(0,C.useState)(null);(0,C.useEffect)(()=>{let e=setTimeout(()=>{M(e=>({...e,search:P})),I(e=>({...e,page:1}))},500);return()=>clearTimeout(e)},[P]);let H=(()=>{let e={...D};return k.search&&(e.searchTerm=k.search),"all"!==k.role&&(e.role=k.role),"all"!==k.isActive&&(e.isActive=k.isActive),"all"!==k.isVerified&&(e.isVerified="true"===k.isVerified),e})(),{data:F,isLoading:O,error:L}=(0,u.useGetAllUsersQuery)(H),z=(null==F?void 0:F.data)||[],_=null==F?void 0:F.meta,q=e=>{I({...D,page:e})},K=async(a,s)=>{try{let l="ACTIVE"===s?"DISABLED":"ACTIVE";await e({id:a,data:{isActive:l}}).unwrap(),S.toast.success("User ".concat("ACTIVE"===l?"enabled":"disabled"," successfully"))}catch(e){console.error("Failed to toggle user status:",e),S.toast.error("Failed to update user status")}},X=async a=>{try{await e({id:a,data:{isVerified:!0}}).unwrap(),S.toast.success("User verified successfully")}catch(e){console.error("Failed to verify user:",e),S.toast.error("Failed to verify user")}},G=async(e,a,s)=>{s||(R({id:e,name:a}),E(!0))},Q=async a=>{try{await e({id:a,data:{isDeleted:!1}}).unwrap(),S.toast.success("User activated successfully")}catch(e){console.error("Failed to activate user:",e),S.toast.error("Failed to activate user")}},J=async()=>{if(B)try{await e({id:B.id,data:{isDeleted:!0}}).unwrap(),E(!1),R(null),S.toast.success("User deleted successfully")}catch(e){console.error("Failed to delete user:",e),S.toast.error("Failed to delete user")}};return O?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading users..."})}):L?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-lg text-red-500",children:"Error loading users"})}):(0,a.jsx)(o.TooltipProvider,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Users"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Total: ",(null==_?void 0:_.total)||0," users"]}),(0,a.jsxs)("span",{children:["Page ",(null==_?void 0:_.page)||1," of ",(null==_?void 0:_.totalPages)||1]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-muted/30 rounded-lg",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative max-w-sm",children:[(0,a.jsx)(f.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(r.Input,{placeholder:"Search users by name or email...",value:P,onChange:e=>{U(e.target.value)},className:"pl-10 pr-10"}),P&&(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0 text-muted-foreground hover:text-foreground",onClick:()=>U(""),children:(0,a.jsx)(w.X,{className:"h-4 w-4"})}),P!==k.search&&P&&(0,a.jsx)("div",{className:"absolute -bottom-1 left-0 h-0.5 w-full bg-blue-500 animate-pulse"})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.Select,{value:k.role,onValueChange:e=>{M({...k,role:e,isActive:"all",isVerified:"all"}),I({...D,page:1})},children:[(0,a.jsx)(c.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(c.SelectValue,{placeholder:"Role"})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"all",children:"All Roles"}),(0,a.jsx)(c.SelectItem,{value:"SUPER_ADMIN",children:"Super Admin"}),(0,a.jsx)(c.SelectItem,{value:"ADMIN",children:"Admin"}),(0,a.jsx)(c.SelectItem,{value:"INSTRUCTOR",children:"Instructor"}),(0,a.jsx)(c.SelectItem,{value:"MODERATOR",children:"Moderator"}),(0,a.jsx)(c.SelectItem,{value:"STUDENT",children:"Student"})]})]}),(0,a.jsxs)(c.Select,{value:k.isActive,onValueChange:e=>{M({...k,isActive:e,role:"all",isVerified:"all"}),I({...D,page:1})},children:[(0,a.jsx)(c.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(c.SelectValue,{placeholder:"Status"})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"all",children:"All Status"}),(0,a.jsx)(c.SelectItem,{value:"ACTIVE",children:"Active"}),(0,a.jsx)(c.SelectItem,{value:"DISABLED",children:"Disabled"})]})]}),(0,a.jsxs)(c.Select,{value:k.isVerified,onValueChange:e=>{M({...k,isVerified:e,role:"all",isActive:"all"}),I({...D,page:1})},children:[(0,a.jsx)(c.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(c.SelectValue,{placeholder:"Verification"})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"all",children:"All"}),(0,a.jsx)(c.SelectItem,{value:"true",children:"Verified"}),(0,a.jsx)(c.SelectItem,{value:"false",children:"Unverified"})]})]})]})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(d.Table,{children:[(0,a.jsx)(d.TableHeader,{children:(0,a.jsxs)(d.TableRow,{children:[(0,a.jsx)(d.TableHead,{className:"w-12",children:"#"}),(0,a.jsx)(d.TableHead,{children:"User"}),(0,a.jsx)(d.TableHead,{children:"Contact"}),(0,a.jsx)(d.TableHead,{children:"Role"}),(0,a.jsx)(d.TableHead,{children:"Status"}),(0,a.jsx)(d.TableHead,{children:"Verification"}),(0,a.jsx)(d.TableHead,{children:"Provider"}),(0,a.jsx)(d.TableHead,{children:"Created"}),(0,a.jsx)(d.TableHead,{children:"Disabled"}),(0,a.jsx)(d.TableHead,{children:"Deleted"}),(0,a.jsx)(d.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(d.TableBody,{children:0===z.length?(0,a.jsx)(d.TableRow,{children:(0,a.jsx)(d.TableCell,{colSpan:9,className:"text-center py-8",children:"No users found"})}):z.map((e,t)=>{var r;return(0,a.jsxs)(d.TableRow,{children:[(0,a.jsx)(d.TableCell,{className:"font-medium",children:(((null==_?void 0:_.page)||1)-1)*((null==_?void 0:_.limit)||10)+t+1}),(0,a.jsx)(d.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.profilePicture||"/placeholder-user.jpg",alt:"".concat(e.firstName," ").concat(e.lastName),className:"w-10 h-10 rounded-full object-cover"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["UID: ",e.uid]})]})]})}),(0,a.jsx)(d.TableCell,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(j.Mail,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.email})]}),e.phoneNumber&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(p.Phone,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.phoneNumber})]})]})}),(0,a.jsx)(d.TableCell,{children:(r=e.role,(0,a.jsx)(s.Badge,{variant:"default",className:{SUPER_ADMIN:"bg-red-500",ADMIN:"bg-purple-500",INSTRUCTOR:"bg-blue-500",MODERATOR:"bg-orange-500",STUDENT:"bg-green-500"}[r]||"bg-gray-500",children:r}))}),(0,a.jsx)(d.TableCell,{children:"ACTIVE"===e.isActive?(0,a.jsx)(s.Badge,{variant:"default",className:"bg-green-500",children:"Active"}):(0,a.jsx)(s.Badge,{variant:"destructive",children:"Disabled"})}),(0,a.jsx)(d.TableCell,{children:e.isVerified?(0,a.jsx)(s.Badge,{variant:"default",className:"bg-blue-500",children:"Verified"}):(0,a.jsx)(s.Badge,{variant:"outline",children:"Unverified"})}),(0,a.jsx)(d.TableCell,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.authOptions.map((e,l)=>(0,a.jsx)(s.Badge,{variant:"outline",className:"text-xs",children:e.provider},l))})}),(0,a.jsx)(d.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(h.Calendar,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:(0,x.format)(new Date(e.createdAt),"MMM dd, yyyy")})]})}),(0,a.jsx)(d.TableCell,{children:"DISABLED"===e.isActive?(0,a.jsx)("div",{children:(0,a.jsx)(s.Badge,{variant:"destructive",children:"Disabled"})}):(0,a.jsx)("div",{children:(0,a.jsx)(s.Badge,{variant:"outline",children:"Enabled"})})}),(0,a.jsx)(d.TableCell,{children:e.isDeleted?(0,a.jsx)("div",{children:(0,a.jsx)(s.Badge,{variant:"destructive",children:"Deleted"})}):(0,a.jsx)("div",{children:(0,a.jsx)(s.Badge,{variant:"outline",children:"Active"})})}),(0,a.jsx)(d.TableCell,{className:"text-right",children:(0,a.jsxs)(i.DropdownMenu,{children:[(0,a.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(l.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(g.default,{className:"h-4 w-4"})]})}),(0,a.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(i.DropdownMenuLabel,{children:"Actions"}),(0,a.jsxs)(i.DropdownMenuItem,{onClick:()=>{var a;return a=e.uid,void(navigator.clipboard.writeText(a),S.toast.success("User ID copied to clipboard"))},children:[(0,a.jsx)(v.Eye,{className:"mr-2 h-4 w-4"}),"Copy User ID"]}),(0,a.jsx)(i.DropdownMenuSeparator,{}),(0,a.jsx)(i.DropdownMenuItem,{onClick:()=>K(e._id,e.isActive),disabled:A,children:"ACTIVE"===e.isActive?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T,{className:"mr-2 h-4 w-4"}),"Disable User"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.UserCheck,{className:"mr-2 h-4 w-4"}),"Enable User"]})}),!e.isVerified&&(0,a.jsxs)(i.DropdownMenuItem,{onClick:()=>X(e.uid),disabled:A,children:[(0,a.jsx)(b.Shield,{className:"mr-2 h-4 w-4"}),"Verify User"]}),(0,a.jsx)(i.DropdownMenuSeparator,{}),(0,a.jsx)(i.DropdownMenuItem,{onClick:()=>{e.isDeleted?Q(e._id):G(e._id,"".concat(e.firstName," ").concat(e.lastName),e.isDeleted)},className:"text-red-600 focus:text-red-600",disabled:A,children:e.isDeleted?(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(m.CheckCircle,{className:"mr-2 h-4 w-4"}),"Active User"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Trash2,{className:"mr-2 h-4 w-4"}),"Delete User"]})})]})]})})]},e._id)})})]})}),_&&_.totalPages>1&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(n.Pagination,{children:(0,a.jsxs)(n.PaginationContent,{children:[(0,a.jsx)(n.PaginationItem,{children:(0,a.jsx)(n.PaginationPrevious,{onClick:()=>q(Math.max(1,_.page-1)),className:1===_.page?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,_.totalPages)},(e,s)=>{let l;return l=_.totalPages<=5||_.page<=3?s+1:_.page>=_.totalPages-2?_.totalPages-4+s:_.page-2+s,(0,a.jsx)(n.PaginationItem,{children:(0,a.jsx)(n.PaginationLink,{onClick:()=>q(l),isActive:l===_.page,className:"cursor-pointer",children:l})},l)}),_.totalPages>5&&_.page<_.totalPages-2&&(0,a.jsx)(n.PaginationItem,{children:(0,a.jsx)(n.PaginationEllipsis,{})}),(0,a.jsx)(n.PaginationItem,{children:(0,a.jsx)(n.PaginationNext,{onClick:()=>q(Math.min(_.totalPages,_.page+1)),className:_.page===_.totalPages?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}),(0,a.jsx)(t.ConfirmationModal,{isOpen:V,onClose:()=>{E(!1),R(null)},onConfirm:J,title:"Delete User",description:"Are you sure you want to delete ".concat(null==B?void 0:B.name,"? This action cannot be undone and will permanently remove the user account and all associated data."),confirmText:"Delete User",cancelText:"Cancel",isLoading:A,variant:"destructive"})]})})}}]);