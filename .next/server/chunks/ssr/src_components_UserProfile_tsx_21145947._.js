module.exports=[89767,a=>{"use strict";a.s(["UserProfile",()=>J,"default",()=>K],89767);var b=a.i(669720),c=a.i(229611),d=a.i(39457),e=a.i(765749),f=a.i(90987),g=a.i(95811),h=a.i(872233),i=a.i(786304),j=a.i(699570),k=a.i(591119),l=a.i(866718),m=a.i(870430),n=a.i(441921),o=a.i(51827);let p=(0,o.default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var q=a.i(641687),r=a.i(863268),s=a.i(582026),t=a.i(491163),u=a.i(102796);let v=(0,o.default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var w=a.i(842419),x=a.i(378743),y=a.i(537771),z=a.i(515542),A=a.i(405036),B=a.i(688774),C=a.i(446871),D=a.i(333140);function E({isEditing:a=!1}){return(0,b.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(k.CardTitle,{className:"text-2xl",children:"Profile"}),a?(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(D.Skeleton,{className:"h-9 w-20"}),(0,b.jsx)(D.Skeleton,{className:"h-9 w-24"})]}):(0,b.jsx)(D.Skeleton,{className:"h-9 w-32"})]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(D.Skeleton,{className:"w-32 h-32 rounded-full"}),a&&(0,b.jsx)("div",{className:"absolute bottom-0 right-0",children:(0,b.jsx)(D.Skeleton,{className:"w-8 h-8 rounded-full"})})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(D.Skeleton,{className:"h-9 w-48 mb-2 mx-auto"}),(0,b.jsx)(D.Skeleton,{className:"h-6 w-24 mx-auto rounded-full"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(D.Skeleton,{className:"h-4 w-20 mb-2"}),(0,b.jsx)(D.Skeleton,{className:"h-10 w-full rounded-md"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(D.Skeleton,{className:"h-4 w-20 mb-2"}),(0,b.jsx)(D.Skeleton,{className:"h-10 w-full rounded-md"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(D.Skeleton,{className:"h-4 w-12 mb-2"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[(0,b.jsx)(D.Skeleton,{className:"w-4 h-4"}),(0,b.jsx)(D.Skeleton,{className:"h-4 w-40"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(D.Skeleton,{className:"h-4 w-24 mb-2"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[(0,b.jsx)(D.Skeleton,{className:"w-4 h-4"}),(0,b.jsx)(D.Skeleton,{className:"h-4 w-32"})]})]})]})]}),a&&(0,b.jsxs)("div",{className:"border-t pt-6",children:[(0,b.jsx)(D.Skeleton,{className:"h-6 w-32 mb-4"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(D.Skeleton,{className:"h-4 w-24 mb-2"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(D.Skeleton,{className:"h-10 w-full rounded-md"}),(0,b.jsx)(D.Skeleton,{className:"absolute right-3 top-3 w-4 h-4"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(D.Skeleton,{className:"h-4 w-32 mb-2"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(D.Skeleton,{className:"h-10 w-full rounded-md"}),(0,b.jsx)(D.Skeleton,{className:"absolute right-3 top-3 w-4 h-4"})]})]})]})]}),(0,b.jsx)("div",{className:"border-t pt-6",children:(0,b.jsx)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(D.Skeleton,{className:"w-4 h-4"}),(0,b.jsx)(D.Skeleton,{className:"h-4 w-32"})]})})})]})]})})}var F=a.i(28171);let G=f.z.string().min(8,{message:"Password must be at least 8 characters long"}).regex(/[A-Z]/,{message:"Password must contain at least one uppercase letter"}).regex(/[a-z]/,{message:"Password must contain at least one lowercase letter"}).regex(/[0-9]/,{message:"Password must contain at least one number"}).regex(/[^A-Za-z0-9]/,{message:"Password must contain at least one special character"}),H=f.z.object({firstName:f.z.string().min(2,{message:"First name must be at least 2 characters."}),lastName:f.z.string().min(2,{message:"Last name must be at least 2 characters."}),profilePicture:f.z.string().optional()}),I=f.z.object({currentPassword:f.z.string().min(1,"Current password is required"),newPassword:G,confirmPassword:f.z.string()}).refine(a=>a.newPassword===a.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function J({user:a}){let[f,o]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[G,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(a.profilePicture),[M,N]=(0,c.useState)(null),[O,{isLoading:P}]=(0,C.useUpdateUserMutation)(),[Q,{isLoading:R}]=(0,F.useChangePasswordMutation)(),S=(0,d.useForm)({resolver:(0,e.zodResolver)(H),defaultValues:{firstName:a.firstName,lastName:a.lastName}}),T=(0,d.useForm)({resolver:(0,e.zodResolver)(I),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),U=S.watch(),V=`${U.firstName} ${U.lastName}`,W=new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"}),X=(a=>{switch(a){case"INSTRUCTOR":return w.GraduationCap;case"ADMIN":return x.Shield;default:return y.Users}})(a.role),Y=async b=>{try{let c=new FormData;M&&M instanceof File&&c.append("file",M);let d={firstName:b.firstName,lastName:b.lastName,...a.profilePicture&&M&&{deletedFiles:[a.profilePicture]}};for(let[a,b]of(c.append("data",JSON.stringify(d)),console.log("FormData entries:"),c.entries()))b instanceof File?console.log(`${a}:`,{name:b.name,size:b.size,type:b.type}):console.log(`${a}:`,b);console.log("Update data:",d),(await O({data:c,id:a._id}).unwrap()).success&&(g.toast.success("Profile updated successfully!"),o(!1),N(null))}catch(a){g.toast.error("Failed to update profile. Please try again."),console.error("Profile update error:",a)}},Z=async a=>{try{(await Q({oldPassword:a.currentPassword,newPassword:a.newPassword}).unwrap()).success&&(g.toast.success("Password changed successfully!"),T.reset())}catch(a){g.toast.error("Failed to change password. Please try again."),console.error("Password change error:",a)}};return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(k.CardTitle,{className:"text-2xl",children:"Profile"}),f?(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.Button,{onClick:S.handleSubmit(Y),size:"sm",disabled:S.formState.isSubmitting||P,children:S.formState.isSubmitting||P?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Save,{className:"w-4 h-4 mr-2"}),"Save"]})}),(0,b.jsxs)(j.Button,{onClick:()=>{S.reset({firstName:a.firstName,lastName:a.lastName}),L(a.profilePicture),N(null),o(!1)},variant:"outline",size:"sm",children:[(0,b.jsx)(u.X,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}):(0,b.jsxs)(j.Button,{onClick:()=>o(!0),variant:"outline",size:"sm",children:[(0,b.jsx)(s.Edit,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]})}),(0,b.jsx)(k.CardContent,{className:"space-y-6",children:(0,b.jsx)(n.Form,{...S,children:(0,b.jsxs)("form",{onSubmit:S.handleSubmit(Y),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(h.Avatar,{className:"w-32 h-32 border-4 border-primary/20",children:[(0,b.jsx)(h.AvatarImage,{src:K||"/placeholder.svg",alt:V}),(0,b.jsxs)(h.AvatarFallback,{className:"text-2xl font-semibold bg-primary/10 text-primary",children:[U.firstName[0],U.lastName[0]]})]}),f&&(0,b.jsxs)("div",{className:"absolute bottom-0 right-0",children:[(0,b.jsx)(m.Label,{htmlFor:"photo-upload",className:"cursor-pointer",children:(0,b.jsx)("div",{className:"bg-primary text-primary-foreground p-2 rounded-full hover:bg-primary/90 transition-colors",children:(0,b.jsx)(v,{className:"w-4 h-4"})})}),(0,b.jsx)(l.Input,{id:"photo-upload",type:"file",accept:"image/*",className:"hidden",onChange:a=>{let b=a.target.files?.[0];if(b){console.log("File selected:",{name:b.name,size:b.size,type:b.type,lastModified:b.lastModified}),N(b);let a=new FileReader;a.onload=a=>{L(a.target?.result)},a.readAsDataURL(b)}}})]})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:V}),(0,b.jsxs)(i.Badge,{variant:"secondary",className:"mt-2 flex items-center gap-1 w-fit mx-auto",children:[(0,b.jsx)(X,{className:"w-3 h-3"}),a.role]})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(n.FormField,{control:S.control,name:"firstName",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"First Name"}),f?(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(l.Input,{...a,placeholder:"Enter first name"})}):(0,b.jsx)("div",{className:"mt-1 p-2 bg-muted rounded-md",children:a.value}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:S.control,name:"lastName",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Last Name"}),f?(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(l.Input,{...a,placeholder:"Enter last name"})}):(0,b.jsx)("div",{className:"mt-1 p-2 bg-muted rounded-md",children:a.value}),(0,b.jsx)(n.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{className:f?"flex flex-col ":"flex flex-col gap-2.5",children:[(0,b.jsx)(m.Label,{children:"Email"}),(0,b.jsxs)("div",{className:"mt-1 p-2 bg-muted rounded-md flex items-center gap-2",children:[(0,b.jsx)(q.Mail,{className:"w-4 h-4 text-muted-foreground"}),a.email]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{children:"Member Since"}),(0,b.jsxs)("div",{className:"mt-1 p-2 bg-muted rounded-md flex items-center gap-2",children:[(0,b.jsx)(p,{className:"w-4 h-4 text-muted-foreground"}),W]})]})]})]}),(0,b.jsx)("div",{className:"border-t pt-6",children:(0,b.jsx)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4"}),"User ID: ",a.uid]})})})]})})})]}),(0,b.jsxs)(k.Card,{className:"mt-6",children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(x.Shield,{className:"w-5 h-5"}),"Change Password"]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)(n.Form,{...T,children:(0,b.jsxs)("form",{onSubmit:T.handleSubmit(Z),className:"space-y-4",children:[(0,b.jsx)(n.FormField,{control:T.control,name:"currentPassword",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Current Password"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(l.Input,{type:"password",placeholder:"Enter your current password",...a})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsx)(n.FormField,{control:T.control,name:"newPassword",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"New Password"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Input,{type:D?"text":"password",placeholder:"Enter new password",...a}),(0,b.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent hover:text-black dark:hover:text-white/80",onClick:()=>E(!D),children:D?(0,b.jsx)(A.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(z.Eye,{className:"h-4 w-4"})})]})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:T.control,name:"confirmPassword",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Confirm Password"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Input,{type:G?"text":"password",placeholder:"Confirm new password",...a}),(0,b.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent hover:text-black dark:hover:text-white/80",onClick:()=>J(!G),children:G?(0,b.jsx)(A.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(z.Eye,{className:"h-4 w-4"})})]})}),(0,b.jsx)(n.FormMessage,{})]})})]}),(0,b.jsx)("div",{className:"bg-muted/50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(x.Shield,{className:"w-4 h-4 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium",children:"Password Requirements:"}),(0,b.jsxs)("ul",{className:"mt-1 space-y-1 text-muted-foreground",children:[(0,b.jsx)("li",{children:"• At least 8 characters long"}),(0,b.jsx)("li",{children:"• Contains uppercase and lowercase letters"}),(0,b.jsx)("li",{children:"• Contains at least one number"}),(0,b.jsx)("li",{children:"• Contains at least one special character"})]})]})]})}),(0,b.jsx)(j.Button,{type:"submit",disabled:R,className:"w-full",children:R?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing Password..."]}):"Change Password"})]})})})]})]})}function K(){let{data:a,isLoading:c,error:d}=(0,C.useUserInfoQuery)(void 0);return c?(0,b.jsx)(E,{}):d?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-destructive",children:"Failed to load profile data. Please try again."})})}):a?.data?(0,b.jsx)(J,{user:a.data}):(0,b.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No profile data found."})})})}}];

//# sourceMappingURL=src_components_UserProfile_tsx_21145947._.js.map