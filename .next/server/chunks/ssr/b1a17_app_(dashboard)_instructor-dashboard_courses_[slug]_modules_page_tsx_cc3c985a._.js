module.exports=[93386,a=>{"use strict";a.s(["default",()=>B],93386);var b=a.i(669720),c=a.i(699570),d=a.i(814574),e=a.i(441921),f=a.i(866718),g=a.i(524805),h=a.i(765749),i=a.i(688774),j=a.i(39457),k=a.i(95811),l=a.i(90987);let m=l.z.object({title:l.z.string().min(2,{message:"Module title must be at least 2 characters."}),duration:l.z.string().optional(),order:l.z.number().min(1,{message:"Order must be at least 1."})});function n({isOpen:a,onClose:l,courseId:n}){let[o,{isLoading:p}]=(0,g.useCreateCourseModuleMutation)(),q=(0,j.useForm)({resolver:(0,h.zodResolver)(m),defaultValues:{title:"",duration:"",order:1}}),r=async a=>{try{let b={...a,courseId:n,moduleNumber:Date.now()};console.log("Creating module:",b),(await o(b).unwrap()).success&&(k.toast.success("Module created successfully!"),q.reset(),l()),l()}catch(a){if(409===a.status)return void k.toast.error("Module with this order already exists. Please choose a different order.");k.toast.error("Failed to create module. Please try again."),console.error(a)}finally{}};return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:l,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(d.DialogHeader,{children:[(0,b.jsx)(d.DialogTitle,{children:"Create New Module"}),(0,b.jsx)(d.DialogDescription,{children:"Add a new module to organize your course content."})]}),(0,b.jsx)(e.Form,{...q,children:(0,b.jsxs)("form",{onSubmit:q.handleSubmit(r),className:"space-y-4",children:[(0,b.jsx)(e.FormField,{control:q.control,name:"title",render:({field:a})=>(0,b.jsxs)(e.FormItem,{children:[(0,b.jsx)(e.FormLabel,{children:"Module Title *"}),(0,b.jsx)(e.FormControl,{children:(0,b.jsx)(f.Input,{placeholder:"Enter module title",...a})}),(0,b.jsx)(e.FormMessage,{})]})}),(0,b.jsx)(e.FormField,{control:q.control,name:"duration",render:({field:a})=>(0,b.jsxs)(e.FormItem,{children:[(0,b.jsx)(e.FormLabel,{children:"Duration (Optional)"}),(0,b.jsx)(e.FormControl,{children:(0,b.jsx)(f.Input,{placeholder:"e.g., 2 hours, 3 weeks",...a})}),(0,b.jsx)(e.FormMessage,{})]})}),(0,b.jsx)(e.FormField,{control:q.control,name:"order",render:({field:a})=>(0,b.jsxs)(e.FormItem,{children:[(0,b.jsx)(e.FormLabel,{children:"Order *"}),(0,b.jsx)(e.FormControl,{children:(0,b.jsx)(f.Input,{type:"number",min:"1",placeholder:"Enter module order",...a,onChange:b=>a.onChange(parseInt(b.target.value)||1)})}),(0,b.jsx)(e.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(c.Button,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,b.jsx)(c.Button,{type:"submit",disabled:p,children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):"Create Module"})]})]})})]})})}var o=a.i(591119),p=a.i(333140);function q(){return(0,b.jsx)(o.Card,{className:"overflow-hidden",children:(0,b.jsx)(o.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsx)(p.Skeleton,{className:"w-10 h-10 rounded-full"}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)(p.Skeleton,{className:"h-6 w-48 mb-2"}),(0,b.jsx)(p.Skeleton,{className:"h-4 w-32"})]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,b.jsx)(p.Skeleton,{className:"h-8 w-16"}),(0,b.jsx)(p.Skeleton,{className:"h-8 w-18"})]})]})})})}var r=a.i(876841),s=a.i(383117),t=a.i(280212),u=a.i(582026),v=a.i(310048),w=a.i(290640),x=a.i(765208),y=a.i(803749),z=a.i(702485),A=a.i(229611);function B(){let a=(0,z.useParams)(),[d,e]=(0,A.useState)(!1),[f,h]=(0,A.useState)(!1),[i,j]=(0,A.useState)(!1),[l,m]=(0,A.useState)(null),[p,B]=(0,A.useState)(null),{data:C,isLoading:D}=(0,g.useGetCourseModulesByCourseIdQuery)(a.slug),[E,{isLoading:F}]=(0,t.useDeleteModuleVideoMutation)(),[G,{isLoading:H}]=(0,g.useDeleteCourseModuleMutation)(),I=C?.data||[],J=async()=>{if(a.slug&&l)try{await E(l.id).unwrap(),h(!1),m(null),k.toast.success("Video deleted successfully")}catch(a){console.error("Failed to delete video:",a),k.toast.error("Failed to delete video")}},K=async()=>{if(a.slug&&p)try{await G(p.id).unwrap(),j(!1),B(null),k.toast.success("Module deleted successfully")}catch(a){console.error("Failed to delete module:",a),k.toast.error("Failed to delete module")}};return(0,b.jsx)("div",{className:"min-h-screen bg-background p-6",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Manage Modules"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Organize your course content into modules"})]})}),(0,b.jsxs)(c.Button,{onClick:()=>e(!0),children:[(0,b.jsx)(w.Plus,{className:"w-4 h-4 mr-2"}),"Add Module"]})]}),(0,b.jsx)("div",{className:"space-y-4",children:D?(0,b.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((a,c)=>(0,b.jsx)(q,{},c))}):(0,b.jsx)(r.Accordion,{type:"multiple",className:"space-y-4",children:I.map(d=>(0,b.jsx)(r.AccordionItem,{value:d._id,className:"border-0",children:(0,b.jsxs)(o.Card,{className:"overflow-hidden",children:[(0,b.jsx)(o.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)("span",{className:"font-semibold",children:d.order})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(r.AccordionTrigger,{className:"hover:no-underline p-0 [&>svg]:hidden",children:(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)(o.CardTitle,{className:"text-xl",children:d.title}),(0,b.jsxs)(o.CardDescription,{children:[d.duration," • ",d.videos?.length||0," videos"]})]})})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,b.jsx)(c.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,b.jsxs)(y.default,{href:`/instructor-dashboard/courses/${a.slug}/modules/${d._id}/edit`,children:[(0,b.jsx)(u.Edit,{className:"w-4 h-4 mr-1"}),"Edit"]})}),(0,b.jsxs)(c.Button,{variant:"destructive",size:"sm",className:"cursor-pointer",onClick:()=>{B({id:d._id,title:d.title}),j(!0)},children:[(0,b.jsx)(x.Trash2,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})}),(0,b.jsx)(r.AccordionContent,{children:(0,b.jsx)(o.CardContent,{className:"pt-0",children:d.videos&&d.videos.length>0?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"font-medium",children:"Module Videos"}),(0,b.jsx)(c.Button,{size:"sm",asChild:!0,children:(0,b.jsxs)(y.default,{href:`/instructor-dashboard/courses/${a.slug}/modules/${d._id}/videos/create`,children:[(0,b.jsx)(w.Plus,{className:"w-4 h-4 mr-1"}),"Add Video"]})})]}),(0,b.jsx)("div",{className:"space-y-2",children:d.videos.map((e,f)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:e.videoNumber}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"font-medium",children:e.title||`Video ${f+1}`}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Video ",f+1," • ",e.duration||"Duration not set"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsx)(y.default,{href:`/instructor-dashboard/courses/${a.slug}/modules/${d._id}/videos/${e._id}/edit`,children:(0,b.jsx)(u.Edit,{className:"w-4 h-4"})})}),(0,b.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:()=>{m({id:e._id,title:e.title||`Video ${f+1}`}),h(!0)},children:(0,b.jsx)(x.Trash2,{className:"w-4 h-4 text-red-500"})})]})]},e._id||f))})]}):(0,b.jsxs)("div",{className:"text-center py-8 border border-dashed rounded-lg",children:[(0,b.jsx)(v.FileText,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h4",{className:"font-medium mb-2",children:"No videos yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Start by adding videos to this module"}),(0,b.jsx)(c.Button,{asChild:!0,children:(0,b.jsxs)(y.default,{href:`/instructor-dashboard/courses/${a.slug}/modules/${d._id}/videos/create`,children:[(0,b.jsx)(w.Plus,{className:"w-4 h-4 mr-2"}),"Add First Video"]})})]})})})]})},d._id))})}),0===I.length&&(0,b.jsx)(o.Card,{children:(0,b.jsxs)(o.CardContent,{className:"text-center py-12",children:[(0,b.jsx)(v.FileText,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No modules yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Start building your course by creating the first module"}),(0,b.jsxs)(c.Button,{onClick:()=>e(!0),children:[(0,b.jsx)(w.Plus,{className:"w-4 h-4 mr-2"}),"Create First Module"]})]})}),(0,b.jsx)(n,{isOpen:d,onClose:()=>e(!1),courseId:a.slug}),(0,b.jsx)(s.ConfirmationModal,{isOpen:f,onClose:()=>{h(!1),m(null)},onConfirm:J,title:"Delete Video",description:`Are you sure you want to delete "${l?.title}"? This action cannot be undone and will permanently remove the video from this module.`,confirmText:"Delete Video",isLoading:F,variant:"destructive"}),(0,b.jsx)(s.ConfirmationModal,{isOpen:i,onClose:()=>{j(!1),B(null)},onConfirm:K,title:"Delete Module",description:`Are you sure you want to delete "${p?.title}"? This action cannot be undone and will permanently remove the entire module and all its videos.`,confirmText:"Delete Module",isLoading:H,variant:"destructive"})]})})}}];

//# sourceMappingURL=b1a17_app_%28dashboard%29_instructor-dashboard_courses_%5Bslug%5D_modules_page_tsx_cc3c985a._.js.map