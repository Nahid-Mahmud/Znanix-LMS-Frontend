module.exports=[445223,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(226003);function e(a){let{reason:b,children:c}=a;throw Object.defineProperty(new d.BailoutToCSRError(b),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},530019,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},75198,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(669720),e=a.r(483312),f=a.r(556704),g=a.r(530019);function h(a){let{moduleIds:b}=a,c=f.workAsyncStorage.getStore();if(void 0===c)return null;let h=[];if(c.reactLoadableManifest&&b){let a=c.reactLoadableManifest;for(let c of b){if(!a[c])continue;let b=a[c].files;h.push(...b)}}return 0===h.length?null:(0,d.jsx)(d.Fragment,{children:h.map(a=>{let b=c.assetPrefix+"/_next/"+(0,g.encodeURIPath)(a);return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:b,rel:"stylesheet",as:"style"},a):((0,e.preload)(b,{as:"script",fetchPriority:"low"}),null)})})}},659112,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(669720),e=a.r(229611),f=a.r(445223),g=a.r(75198);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},903032,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(463652)._(a.r(659112));function e(a,b){var c;let e={};"function"==typeof a&&(e.loader=a);let f={...e,...b};return(0,d.default)({...f,modules:null==(c=f.loadableGenerated)?void 0:c.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},280212,a=>{"use strict";a.s(["useCreateModuleVideoMutation",()=>b,"useDeleteModuleVideoMutation",()=>g,"useGetModuleVideoByIdQuery",()=>e,"useUpdateModuleVideoMutation",()=>f]);let{useCreateModuleVideoMutation:b,useGetAllModuleVideosQuery:c,useGetVideosByModuleIdQuery:d,useGetModuleVideoByIdQuery:e,useUpdateModuleVideoMutation:f,useDeleteModuleVideoMutation:g}=a.i(151944).baseApi.injectEndpoints({endpoints:a=>({createModuleVideo:a.mutation({query:a=>({url:"/module-videos",method:"POST",data:a}),invalidatesTags:["Course","CourseModule","ModuleVideo"]}),getAllModuleVideos:a.query({query:a=>({url:"/module-videos",method:"GET",params:a}),providesTags:["Course","CourseModule","ModuleVideo"]}),getVideosByModuleId:a.query({query:a=>({url:`/module-videos/module/${a}`,method:"GET"}),providesTags:["Course","CourseModule","ModuleVideo"]}),getModuleVideoById:a.query({query:a=>({url:`/module-videos/${a}`,method:"GET"}),providesTags:["Course","CourseModule","ModuleVideo"]}),updateModuleVideo:a.mutation({query:({data:a,videoId:b})=>({url:`/module-videos/${b}`,method:"PATCH",data:a}),invalidatesTags:["Course","CourseModule","ModuleVideo"]}),deleteModuleVideo:a.mutation({query:a=>({url:`/module-videos/${a}`,method:"DELETE"}),invalidatesTags:["Course","CourseModule","ModuleVideo"]})})})},894690,a=>{"use strict";a.s(["default",()=>u]);var b=a.i(669720),c=a.i(674045),d=a.i(699570),e=a.i(591119),f=a.i(975612),g=a.i(441921),h=a.i(866718),i=a.i(280212),j=a.i(765749),k=a.i(688774),l=a.i(491163),m=a.i(903032),n=a.i(702485),o=a.i(229611),p=a.i(39457),q=a.i(95811),r=a.i(90987);let s=(0,m.default)(async()=>{},{loadableGenerated:{modules:[6305]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"border rounded-md p-4 min-h-[100px] bg-muted animate-pulse"})}),t=r.z.object({title:r.z.string().min(1,{message:"Title is required"}),description:r.z.string().max(1e4,{message:"Description must be at most 10000 characters"}).optional(),duration:r.z.string().min(1,{message:"Duration is required"}),videoNumber:r.z.number().min(1,{message:"Video number must be at least 1"}),videoFile:r.z.string().optional(),youtubeVideoUrl:r.z.string().optional(),useYoutubeVideo:r.z.boolean().optional()}).refine(a=>!a.useYoutubeVideo||!!a.youtubeVideoUrl&&""!==a.youtubeVideoUrl.trim(),{message:"YouTube video URL is required when using YouTube video.",path:["youtubeVideoUrl"]}).refine(a=>!!a.useYoutubeVideo||!!a.videoFile&&""!==a.videoFile.trim(),{message:"Please upload a video file.",path:["videoFile"]});function u(){let a=(0,n.useParams)(),m=(0,n.useRouter)(),[r,u]=(0,o.useState)([]),[v,{isLoading:w}]=(0,i.useCreateModuleVideoMutation)(),x=(0,p.useForm)({resolver:(0,j.zodResolver)(t),defaultValues:{title:"",description:"",duration:"",videoNumber:1,videoFile:"",youtubeVideoUrl:"",useYoutubeVideo:!1}}),y=x.watch("useYoutubeVideo");(0,o.useEffect)(()=>{y?(x.setValue("videoFile",""),u([])):x.setValue("youtubeVideoUrl","")},[y,x]);let z=a=>{if(u(a),x.setValue("videoFile",a.length>0?a[0].file.name:""),a.length>0&&!x.getValues("title")){let b=a[0].file.name.replace(/\.[^/.]+$/,"");x.setValue("title",b)}x.trigger("videoFile")},A=async b=>{try{if(!b.useYoutubeVideo&&!r[0]?.file)return void q.toast.error("Please upload a video file");if(b.useYoutubeVideo&&(!b.youtubeVideoUrl||""===b.youtubeVideoUrl.trim()))return void q.toast.error("Please enter a YouTube video URL");let c=new FormData,d={moduleId:a.moduleId,videoNumber:b.videoNumber,title:b.title,duration:b.duration,description:b.description||"",...b.useYoutubeVideo?{youtubeVideoUrl:b.youtubeVideoUrl}:{},...b.useYoutubeVideo?{useYoutubeVideo:b.useYoutubeVideo}:{}};c.append("data",JSON.stringify(d)),!b.useYoutubeVideo&&r[0]?.file&&c.append("file",r[0].file),(await v(c).unwrap()).success&&(q.toast.success("Video created successfully!",{description:`Video "${b.title}" has been added to the module.`}),m.back())}catch(a){if("object"==typeof a&&null!==a&&"status"in a&&409===a.status)return void q.toast.error("Video Number and video Title must be unique within the module.");q.toast.error("Failed to create video. Please try again."),console.error(a)}};return(0,b.jsx)("div",{className:"min-h-screen bg-background p-6",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Add Video"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Upload a new video to this module"})]})})}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Video Information"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(g.Form,{...x,children:(0,b.jsxs)("form",{onSubmit:x.handleSubmit(A),className:"space-y-6",children:[(0,b.jsx)(g.FormField,{control:x.control,name:"useYoutubeVideo",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(f.Checkbox,{checked:a.value,onCheckedChange:a.onChange})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(g.FormLabel,{children:"Use YouTube Video"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use a YouTube video instead of uploading a video file"})]})]})}),x.watch("useYoutubeVideo")&&(0,b.jsx)(g.FormField,{control:x.control,name:"youtubeVideoUrl",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"YouTube Video URL *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"Enter YouTube video URL (e.g., https://www.youtube.com/watch?v=...)",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),!x.watch("useYoutubeVideo")&&(0,b.jsx)(g.FormField,{control:x.control,name:"videoFile",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Video File *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)("div",{children:(0,b.jsx)(c.default,{maxSize:0x6400000,accept:"video/*",onFilesChange:z,placeholder:"Upload video file"})})}),(0,b.jsx)(g.FormMessage,{}),0===r.length&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Supported formats: MP4, MOV, AVI, WMV (Max size: 100MB)"})]})}),(0,b.jsx)(g.FormField,{control:x.control,name:"title",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Video Title *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"Enter video title",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(g.FormField,{control:x.control,name:"videoNumber",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Video Number *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{type:"number",placeholder:"1",...a,onChange:b=>a.onChange(parseInt(b.target.value)||1)})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:x.control,name:"duration",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Duration *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"e.g., 15 min, 1h 30min",...a})}),(0,b.jsx)(g.FormMessage,{})]})})]}),(0,b.jsx)(g.FormField,{control:x.control,name:"description",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Description (Optional)"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(s,{value:a.value||"",onChange:a.onChange,onBlur:a.onBlur,placeholder:"Describe what students will learn in this video...",className:"min-h-[200px]"})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>m.back(),children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",disabled:w,children:w?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Save,{className:"w-4 h-4 mr-2"}),"Create Video"]})})]})]})})})]})]})})}}];

//# sourceMappingURL=_7dbe219b._.js.map