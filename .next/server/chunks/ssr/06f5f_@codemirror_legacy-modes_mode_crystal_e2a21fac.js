module.exports=[826413,a=>{"use strict";function b(a,b){return RegExp((b?"":"^")+"(?:"+a.join("|")+")"+(b?"$":"\\b"))}function c(a,b,c){return c.tokenize.push(a),a(b,c)}a.s(["crystal",()=>z]);var d=/^(?:[-+/%|&^]|\*\*?|[<>]{2})/,e=/^(?:[=!]~|===|<=>|[<>=!]=?|[|&]{2}|~)/,f=/^(?:\[\][?=]?)/,g=/^(?:\.(?:\.{2})?|->|[?:])/,h=/^[a-z_\u009F-\uFFFF][a-zA-Z0-9_\u009F-\uFFFF]*/,i=/^[A-Z_\u009F-\uFFFF][a-zA-Z0-9_\u009F-\uFFFF]*/,j=b(["abstract","alias","as","asm","begin","break","case","class","def","do","else","elsif","end","ensure","enum","extend","for","fun","if","include","instance_sizeof","lib","macro","module","next","of","out","pointerof","private","protected","rescue","return","require","select","sizeof","struct","super","then","type","typeof","uninitialized","union","unless","until","when","while","with","yield","__DIR__","__END_LINE__","__FILE__","__LINE__"]),k=b(["true","false","nil","self"]),l=b(["def","fun","macro","class","module","struct","lib","enum","union","do","for"]),m=b(["if","unless","case","while","until","begin","then"]),n=["end","else","elsif","rescue","ensure"],o=b(n),p=["\\)","\\}","\\]"],q=RegExp("^(?:"+p.join("|")+")$"),r={def:w,fun:w,macro:function(a,b){var c;if(a.eatSpace())return null;if(c=a.match(h)){if("def"==c)return"keyword";a.eat(/[?!]/)}return b.tokenize.pop(),"def"},class:x,module:x,struct:x,lib:x,enum:x,union:x},s={"[":"]","{":"}","(":")","<":">"};function t(a,b){if(a.eatSpace())return null;if("\\"!=b.lastToken&&a.match("{%",!1))return c(v("%","%"),a,b);if("\\"!=b.lastToken&&a.match("{{",!1))return c(v("{","}"),a,b);if("#"==a.peek())return a.skipToEnd(),"comment";if(a.match(h)){if(a.eat(/[?!]/),p=a.current(),a.eat(":"))return"atom";if("."==b.lastToken)return"property";if(j.test(p))return l.test(p)?"fun"==p&&b.blocks.indexOf("lib")>=0||"def"==p&&"abstract"==b.lastToken||(b.blocks.push(p),b.currentIndent+=1):("operator"==b.lastStyle||!b.lastStyle)&&m.test(p)?(b.blocks.push(p),b.currentIndent+=1):"end"==p&&(b.blocks.pop(),b.currentIndent-=1),r.hasOwnProperty(p)&&b.tokenize.push(r[p]),"keyword";else if(k.test(p))return"atom";return"variable"}if(a.eat("@"))return"["==a.peek()?c(u("[","]","meta"),a,b):(a.eat("@"),a.match(h)||a.match(i),"propertyName");if(a.match(i))return"tag";if(a.eat(":"))return a.eat('"')?c(y('"',"atom",!1),a,b):a.match(h)||a.match(i)||a.match(d)||a.match(e)||a.match(f)?"atom":(a.eat(":"),"operator");if(a.eat('"'))return c(y('"',"string",!0),a,b);if("%"==a.peek()){var n,o,p,q,t="string",w=!0;if(a.match("%r"))t="string.special",q=a.next();else if(a.match("%w"))w=!1,q=a.next();else if(a.match("%q"))w=!1,q=a.next();else if(q=a.match(/^%([^\w\s=])/))q=q[1];else if(a.match(/^%[a-zA-Z_\u009F-\uFFFF][\w\u009F-\uFFFF]*/))return"meta";else if(a.eat("%"))return"operator";return s.hasOwnProperty(q)&&(q=s[q]),c(y(q,t,w),a,b)}return(p=a.match(/^<<-('?)([A-Z]\w*)\1/))?c((n=p[2],o=!p[1],function(a,b){if(a.sol()&&(a.eatSpace(),a.match(n)))return b.tokenize.pop(),"string";for(var c=!1;a.peek();)if(c)a.next(),c=!1;else{if(a.match("{%",!1))return b.tokenize.push(v("%","%")),"string";if(a.match("{{",!1))return b.tokenize.push(v("{","}")),"string";if(o&&a.match("#{",!1))return b.tokenize.push(u("#{","}","meta")),"string";c="\\"==a.next()&&o}return"string"}),a,b):a.eat("'")?(a.match(/^(?:[^']|\\(?:[befnrtv0'"]|[0-7]{3}|u(?:[0-9a-fA-F]{4}|\{[0-9a-fA-F]{1,6}\})))/),a.eat("'"),"atom"):a.eat("0")?(a.eat("x")?a.match(/^[0-9a-fA-F_]+/):a.eat("o")?a.match(/^[0-7_]+/):a.eat("b")&&a.match(/^[01_]+/),"number"):a.eat(/^\d/)?(a.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+-]?\d+)?/),"number"):a.match(d)?(a.eat("="),"operator"):a.match(e)||a.match(g)?"operator":(p=a.match(/[({[]/,!1))?c(u(p=p[0],s[p],null),a,b):a.eat("\\")?(a.next(),"meta"):(a.next(),null)}function u(a,b,c,d){return function(e,f){if(!d&&e.match(a))return f.tokenize[f.tokenize.length-1]=u(a,b,c,!0),f.currentIndent+=1,c;var g=t(e,f);return e.current()===b&&(f.tokenize.pop(),f.currentIndent-=1,g=c),g}}function v(a,b,c){return function(d,e){return!c&&d.match("{"+a)?(e.currentIndent+=1,e.tokenize[e.tokenize.length-1]=v(a,b,!0),"meta"):d.match(b+"}")?(e.currentIndent-=1,e.tokenize.pop(),"meta"):t(d,e)}}function w(a,b){return a.eatSpace()?null:(a.match(h)?a.eat(/[!?]/):a.match(d)||a.match(e)||a.match(f),b.tokenize.pop(),"def")}function x(a,b){return a.eatSpace()?null:(a.match(i),b.tokenize.pop(),"def")}function y(a,b,c){return function(d,e){for(var f=!1;d.peek();)if(f)d.next(),f=!1;else{if(d.match("{%",!1))return e.tokenize.push(v("%","%")),b;if(d.match("{{",!1))return e.tokenize.push(v("{","}")),b;if(c&&d.match("#{",!1))return e.tokenize.push(u("#{","}","meta")),b;var g=d.next();if(g==a)return e.tokenize.pop(),b;f=c&&"\\"==g}return b}}let z={name:"crystal",startState:function(){return{tokenize:[t],currentIndent:0,lastToken:null,lastStyle:null,blocks:[]}},token:function(a,b){var c=b.tokenize[b.tokenize.length-1](a,b),d=a.current();return c&&"comment"!=c&&(b.lastToken=d,b.lastStyle=c),c},indent:function(a,b,c){return(b=b.replace(/^\s*(?:\{%)?\s*|\s*(?:%\})?\s*$/g,""),o.test(b)||q.test(b))?c.unit*(a.currentIndent-1):c.unit*a.currentIndent},languageData:{indentOnInput:b(p.concat(n),!0),commentTokens:{line:"#"}}}}];

//# sourceMappingURL=06f5f_%40codemirror_legacy-modes_mode_crystal_e2a21fac.js.map