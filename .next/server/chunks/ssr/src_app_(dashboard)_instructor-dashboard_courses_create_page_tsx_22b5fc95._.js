module.exports=[497569,a=>{"use strict";a.s(["default",()=>w]);var b=a.i(669720),c=a.i(674045),d=a.i(699570),e=a.i(591119),f=a.i(975612),g=a.i(441921),h=a.i(866718),i=a.i(582975),j=a.i(580701),k=a.i(429246),l=a.i(712944),m=a.i(765749),n=a.i(688774),o=a.i(491163),p=a.i(702485),q=a.i(229611),r=a.i(39457),s=a.i(95811),t=a.i(90987),u=function(a){return a.PAID="PAID",a.FREE="FREE",a}(u||{});let v=t.z.object({name:t.z.string().min(2,{message:"Course name must be at least 2 characters."}),description:t.z.string().min(10,{message:"Description must be at least 10 characters."}),price:t.z.number().min(0,{message:"Price must be 0 or greater."}),courseDuration:t.z.number().min(0,{message:"Course duration is required"}),type:t.z.nativeEnum(u),certificate:t.z.boolean(),tags:t.z.string().min(1,{message:"Please add at least one tag."}).refine(a=>a.split(",").map(a=>a.trim()).filter(a=>a.length>0).length<=5,{message:"Please provide at most 5 tags.",path:["tags"]}),thumbnail:t.z.string().min(1,{message:"Please upload a course thumbnail."}),introVideo:t.z.string().optional(),discount:t.z.number().min(0).max(100).optional(),longDescription:t.z.string("Long description is required").min(20,"Long description must be at least 20 characters long").max(1e4,"Long description must be at most 5000 characters long"),youtubeVideoUrl:t.z.string().optional(),useYoutubeVideo:t.z.boolean().optional()}).refine(a=>"PAID"!==a.type||!(a.price<=0),{message:"Paid courses must have a price greater than 0.",path:["price"]}).refine(a=>!a.useYoutubeVideo||!!a.youtubeVideoUrl&&""!==a.youtubeVideoUrl.trim(),{message:"YouTube video URL is required when using YouTube video.",path:["youtubeVideoUrl"]}).refine(a=>!!a.useYoutubeVideo||!!a.introVideo&&""!==a.introVideo.trim(),{message:"Please upload an intro video.",path:["introVideo"]});function w(){let a=(0,p.useRouter)(),[t,u]=(0,q.useState)([]),[w,x]=(0,q.useState)([]),[y,{isLoading:z}]=(0,l.useCreateCourseMutation)(),A=a=>{u(a),C.setValue("thumbnail",a.length>0?a[0].file.name:""),C.trigger("thumbnail")},B=a=>{x(a),C.setValue("introVideo",a.length>0?a[0].file.name:""),C.trigger("introVideo")},C=(0,r.useForm)({resolver:(0,m.zodResolver)(v),defaultValues:{name:"",description:"",price:0,courseDuration:0,type:"PAID",certificate:!1,tags:"",thumbnail:"",introVideo:"",discount:0,longDescription:"",youtubeVideoUrl:"",useYoutubeVideo:!1}}),D=C.watch("type"),E=C.watch("useYoutubeVideo");(0,q.useEffect)(()=>{"FREE"===D&&C.setValue("price",0)},[D,C]),(0,q.useEffect)(()=>{E?(C.setValue("introVideo",""),x([])):C.setValue("youtubeVideoUrl","")},[E,C]);let F=async b=>{try{let c=b.tags.split(",").map(a=>a.trim()).filter(a=>a.length>0),d={...b,tags:c,price:"FREE"===b.type?0:b.price,...b.useYoutubeVideo?{youtubeVideoUrl:b.youtubeVideoUrl}:{},...b.useYoutubeVideo?{introVideo:void 0}:{},...!b.useYoutubeVideo?{youtubeVideoUrl:void 0}:{}},e=new FormData;e.append("data",JSON.stringify(d)),t[0]?.file instanceof File&&e.append("thumbnail",t[0].file),!b.useYoutubeVideo&&w[0]?.file instanceof File&&e.append("introVideo",w[0].file),(await y(e).unwrap()).success&&s.toast.success("Course created successfully!",{description:`Your course "${b.name}" has been created.`}),a.push("/instructor-dashboard")}catch(a){s.toast.error("Failed to create course. Please try again."),console.log(a)}finally{}};return(0,b.jsx)("div",{className:"min-h-screen bg-background p-6",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center flex-col mx-auto",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Create New Course"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Build your next amazing course"})]}),(0,b.jsxs)(e.Card,{className:"",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Course Information"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(g.Form,{...C,children:(0,b.jsxs)("form",{onSubmit:C.handleSubmit(F),className:"space-y-6",children:[(0,b.jsx)(g.FormField,{control:C.control,name:"name",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Course Name *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"Enter course name",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:C.control,name:"description",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Short Description *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(k.Textarea,{placeholder:"Describe your course within one or two sentences",className:"min-h-[120px]",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:C.control,name:"longDescription",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Long Description *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(i.MDXEditor,{value:a.value||"",onChange:a.onChange,onBlur:a.onBlur,name:a.name,placeholder:"Write a detailed description of your course using markdown. You can format text, add headings, lists, links, and more...",className:"min-h-[200px]",showPreview:!0})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(g.FormField,{control:C.control,name:"type",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Course Type *"}),(0,b.jsxs)(j.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(j.SelectTrigger,{className:"w-full",children:(0,b.jsx)(j.SelectValue,{placeholder:"Select course type"})})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"PAID",children:"Paid"}),(0,b.jsx)(j.SelectItem,{value:"FREE",children:"Free"})]})]}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:C.control,name:"price",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Price (BDT) *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{type:"number",placeholder:"0.00",...a,disabled:"FREE"===D,onChange:b=>a.onChange(parseFloat(b.target.value)||0)})}),(0,b.jsx)(g.FormMessage,{})]})})]}),(0,b.jsx)(g.FormField,{control:C.control,name:"courseDuration",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Course Duration"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{type:"number",placeholder:"e.g., 8 weeks, 20 hours",...a,onChange:b=>a.onChange(parseFloat(b.target.value)||0)})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:C.control,name:"tags",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Tags *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"Enter up to 5 tags separated by commas (e.g., web development, react, javascript)",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:C.control,name:"useYoutubeVideo",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(f.Checkbox,{checked:a.value,onCheckedChange:a.onChange})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(g.FormLabel,{children:"Use YouTube Video"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use a YouTube video instead of uploading an intro video"})]})]})}),C.watch("useYoutubeVideo")&&(0,b.jsx)(g.FormField,{control:C.control,name:"youtubeVideoUrl",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"YouTube Video URL *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"Enter YouTube video URL (e.g., https://www.youtube.com/watch?v=...)",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(g.FormField,{control:C.control,name:"thumbnail",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Course Thumbnail *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)("div",{children:(0,b.jsx)(c.default,{maxSize:0x1400000,accept:"image/*",onFilesChange:A,placeholder:"Upload thumbnail image"})})}),(0,b.jsx)(g.FormMessage,{}),0===t.length&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Thumbnail image is required for the course"})]})}),!C.watch("useYoutubeVideo")&&(0,b.jsx)(g.FormField,{control:C.control,name:"introVideo",render:({field:a})=>(0,b.jsxs)(g.FormItem,{children:[(0,b.jsx)(g.FormLabel,{children:"Intro Video *"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)("div",{children:(0,b.jsx)(c.default,{maxSize:0x1400000,accept:"video/*",onFilesChange:B,placeholder:"Upload intro video"})})}),(0,b.jsx)(g.FormMessage,{}),0===w.length&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Intro video is required for the course"})]})})]}),(0,b.jsx)("div",{className:"flex flex-col space-y-4",children:(0,b.jsx)(g.FormField,{control:C.control,name:"certificate",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(f.Checkbox,{checked:a.value,onCheckedChange:a.onChange})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(g.FormLabel,{children:"Certificate Available"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Students will receive a certificate upon completion"})]})]})})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>a.back(),children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",disabled:z,children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Save,{className:"w-4 h-4 mr-2"}),"Create Course"]})})]})]})})})]})]})})}}];

//# sourceMappingURL=src_app_%28dashboard%29_instructor-dashboard_courses_create_page_tsx_22b5fc95._.js.map