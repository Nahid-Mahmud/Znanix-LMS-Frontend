{"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/@codemirror+legacy-modes@6.5.1/node_modules/@codemirror/legacy-modes/mode/ebnf.js"],"sourcesContent":["var commentType = {slash: 0, parenthesis: 1};\nvar stateType = {comment: 0, _string: 1, characterClass: 2};\n\nexport const ebnf = {\n  name: \"ebnf\",\n  startState: function () {\n    return {\n      stringType: null,\n      commentType: null,\n      braced: 0,\n      lhs: true,\n      localState: null,\n      stack: [],\n      inDefinition: false\n    };\n  },\n  token: function (stream, state) {\n    if (!stream) return;\n\n    //check for state changes\n    if (state.stack.length === 0) {\n      //strings\n      if ((stream.peek() == '\"') || (stream.peek() == \"'\")) {\n        state.stringType = stream.peek();\n        stream.next(); // Skip quote\n        state.stack.unshift(stateType._string);\n      } else if (stream.match('/*')) { //comments starting with /*\n        state.stack.unshift(stateType.comment);\n        state.commentType = commentType.slash;\n      } else if (stream.match('(*')) { //comments starting with (*\n        state.stack.unshift(stateType.comment);\n        state.commentType = commentType.parenthesis;\n      }\n    }\n\n    //return state\n    //stack has\n    switch (state.stack[0]) {\n    case stateType._string:\n      while (state.stack[0] === stateType._string && !stream.eol()) {\n        if (stream.peek() === state.stringType) {\n          stream.next(); // Skip quote\n          state.stack.shift(); // Clear flag\n        } else if (stream.peek() === \"\\\\\") {\n          stream.next();\n          stream.next();\n        } else {\n          stream.match(/^.[^\\\\\\\"\\']*/);\n        }\n      }\n      return state.lhs ? \"property\" : \"string\"; // Token style\n\n    case stateType.comment:\n      while (state.stack[0] === stateType.comment && !stream.eol()) {\n        if (state.commentType === commentType.slash && stream.match('*/')) {\n          state.stack.shift(); // Clear flag\n          state.commentType = null;\n        } else if (state.commentType === commentType.parenthesis && stream.match('*)')) {\n          state.stack.shift(); // Clear flag\n          state.commentType = null;\n        } else {\n          stream.match(/^.[^\\*]*/);\n        }\n      }\n      return \"comment\";\n\n    case stateType.characterClass:\n      while (state.stack[0] === stateType.characterClass && !stream.eol()) {\n        if (!(stream.match(/^[^\\]\\\\]+/) || stream.match('.'))) {\n          state.stack.shift();\n        }\n      }\n      return \"operator\";\n    }\n\n    var peek = stream.peek();\n\n    //no stack\n    switch (peek) {\n    case \"[\":\n      stream.next();\n      state.stack.unshift(stateType.characterClass);\n      return \"bracket\";\n    case \":\":\n    case \"|\":\n    case \";\":\n      stream.next();\n      return \"operator\";\n    case \"%\":\n      if (stream.match(\"%%\")) {\n        return \"header\";\n      } else if (stream.match(/[%][A-Za-z]+/)) {\n        return \"keyword\";\n      } else if (stream.match(/[%][}]/)) {\n        return \"bracket\";\n      }\n      break;\n    case \"/\":\n      if (stream.match(/[\\/][A-Za-z]+/)) {\n        return \"keyword\";\n      }\n    case \"\\\\\":\n      if (stream.match(/[\\][a-z]+/)) {\n        return \"string.special\";\n      }\n    case \".\":\n      if (stream.match(\".\")) {\n        return \"atom\";\n      }\n    case \"*\":\n    case \"-\":\n    case \"+\":\n    case \"^\":\n      if (stream.match(peek)) {\n        return \"atom\";\n      }\n    case \"$\":\n      if (stream.match(\"$$\")) {\n        return \"builtin\";\n      } else if (stream.match(/[$][0-9]+/)) {\n        return \"variableName.special\";\n      }\n    case \"<\":\n      if (stream.match(/<<[a-zA-Z_]+>>/)) {\n        return \"builtin\";\n      }\n    }\n\n    if (stream.match('//')) {\n      stream.skipToEnd();\n      return \"comment\";\n    } else if (stream.match('return')) {\n      return \"operator\";\n    } else if (stream.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)) {\n      if (stream.match(/(?=[\\(.])/)) {\n        return \"variable\";\n      } else if (stream.match(/(?=[\\s\\n]*[:=])/)) {\n        return \"def\";\n      }\n      return \"variableName.special\";\n    } else if ([\"[\", \"]\", \"(\", \")\"].indexOf(stream.peek()) != -1) {\n      stream.next();\n      return \"bracket\";\n    } else if (!stream.eatSpace()) {\n      stream.next();\n    }\n    return null;\n  }\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}