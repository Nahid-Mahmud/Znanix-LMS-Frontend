module.exports=[11177,a=>{"use strict";a.s(["default",()=>B],11177);var b=a.i(669720),c=a.i(786304),d=a.i(699570),e=a.i(383117),f=a.i(335732),g=a.i(866718),h=a.i(882524),i=a.i(580701),j=a.i(206015),k=a.i(785259),l=a.i(446871),m=a.i(773608),n=a.i(825570),o=a.i(832281),p=a.i(515542),q=a.i(641687),r=a.i(329303),r=r,s=a.i(642830),t=a.i(578945),u=a.i(378743),v=a.i(765208),w=a.i(906989);let x=(0,a.i(51827).default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var y=a.i(102796),z=a.i(229611),A=a.i(95811);function B(){let[a,{isLoading:B}]=(0,l.useUpdateUserMutation)(),[C,D]=(0,z.useState)({page:1,limit:10}),[E,F]=(0,z.useState)({search:"",role:"all",isActive:"all",isVerified:"all"}),[G,H]=(0,z.useState)(""),[I,J]=(0,z.useState)(!1),[K,L]=(0,z.useState)(null);(0,z.useEffect)(()=>{let a=setTimeout(()=>{F(a=>({...a,search:G})),D(a=>({...a,page:1}))},500);return()=>clearTimeout(a)},[G]);let M=(()=>{let a={...C};return E.search&&(a.searchTerm=E.search),"all"!==E.role&&(a.role=E.role),"all"!==E.isActive&&(a.isActive=E.isActive),"all"!==E.isVerified&&(a.isVerified="true"===E.isVerified),a})(),{data:N,isLoading:O,error:P}=(0,l.useGetAllUsersQuery)(M),Q=N?.data||[],R=N?.meta,S=a=>{D({...C,page:a})},T=async(b,c)=>{try{let d="ACTIVE"===c?"DISABLED":"ACTIVE";await a({id:b,data:{isActive:d}}).unwrap(),A.toast.success(`User ${"ACTIVE"===d?"enabled":"disabled"} successfully`)}catch(a){console.error("Failed to toggle user status:",a),A.toast.error("Failed to update user status")}},U=async b=>{try{await a({id:b,data:{isVerified:!0}}).unwrap(),A.toast.success("User verified successfully")}catch(a){console.error("Failed to verify user:",a),A.toast.error("Failed to verify user")}},V=async(a,b,c)=>{c||(L({id:a,name:b}),J(!0))},W=async b=>{try{await a({id:b,data:{isDeleted:!1}}).unwrap(),A.toast.success("User activated successfully")}catch(a){console.error("Failed to activate user:",a),A.toast.error("Failed to activate user")}},X=async()=>{if(K)try{await a({id:K.id,data:{isDeleted:!0}}).unwrap(),J(!1),L(null),A.toast.success("User deleted successfully")}catch(a){console.error("Failed to delete user:",a),A.toast.error("Failed to delete user")}};return O?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"text-lg",children:"Loading users..."})}):P?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"text-lg text-red-500",children:"Error loading users"})}):(0,b.jsx)(k.TooltipProvider,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Users"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Total: ",R?.total||0," users"]}),(0,b.jsxs)("span",{children:["Page ",R?.page||1," of ",R?.totalPages||1]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-muted/30 rounded-lg",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative max-w-sm",children:[(0,b.jsx)(t.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search users by name or email...",value:G,onChange:a=>{H(a.target.value)},className:"pl-10 pr-10"}),G&&(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0 text-muted-foreground hover:text-foreground",onClick:()=>H(""),children:(0,b.jsx)(y.X,{className:"h-4 w-4"})}),G!==E.search&&G&&(0,b.jsx)("div",{className:"absolute -bottom-1 left-0 h-0.5 w-full bg-blue-500 animate-pulse"})]})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(i.Select,{value:E.role,onValueChange:a=>{F({...E,role:a,isActive:"all",isVerified:"all"}),D({...C,page:1})},children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(i.SelectValue,{placeholder:"Role"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Roles"}),(0,b.jsx)(i.SelectItem,{value:"SUPER_ADMIN",children:"Super Admin"}),(0,b.jsx)(i.SelectItem,{value:"ADMIN",children:"Admin"}),(0,b.jsx)(i.SelectItem,{value:"INSTRUCTOR",children:"Instructor"}),(0,b.jsx)(i.SelectItem,{value:"MODERATOR",children:"Moderator"}),(0,b.jsx)(i.SelectItem,{value:"STUDENT",children:"Student"})]})]}),(0,b.jsxs)(i.Select,{value:E.isActive,onValueChange:a=>{F({...E,isActive:a,role:"all",isVerified:"all"}),D({...C,page:1})},children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(i.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(i.SelectItem,{value:"ACTIVE",children:"Active"}),(0,b.jsx)(i.SelectItem,{value:"DISABLED",children:"Disabled"})]})]}),(0,b.jsxs)(i.Select,{value:E.isVerified,onValueChange:a=>{F({...E,isVerified:a,role:"all",isActive:"all"}),D({...C,page:1})},children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(i.SelectValue,{placeholder:"Verification"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(i.SelectItem,{value:"true",children:"Verified"}),(0,b.jsx)(i.SelectItem,{value:"false",children:"Unverified"})]})]})]})]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{className:"w-12",children:"#"}),(0,b.jsx)(j.TableHead,{children:"User"}),(0,b.jsx)(j.TableHead,{children:"Contact"}),(0,b.jsx)(j.TableHead,{children:"Role"}),(0,b.jsx)(j.TableHead,{children:"Status"}),(0,b.jsx)(j.TableHead,{children:"Verification"}),(0,b.jsx)(j.TableHead,{children:"Provider"}),(0,b.jsx)(j.TableHead,{children:"Created"}),(0,b.jsx)(j.TableHead,{children:"Disabled"}),(0,b.jsx)(j.TableHead,{children:"Deleted"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(j.TableBody,{children:0===Q.length?(0,b.jsx)(j.TableRow,{children:(0,b.jsx)(j.TableCell,{colSpan:9,className:"text-center py-8",children:"No users found"})}):Q.map((a,e)=>{var g;return(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{className:"font-medium",children:((R?.page||1)-1)*(R?.limit||10)+e+1}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("img",{src:a.profilePicture||"/placeholder-user.jpg",alt:`${a.firstName} ${a.lastName}`,className:"w-10 h-10 rounded-full object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-medium",children:[a.firstName," ",a.lastName]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["UID: ",a.uid]})]})]})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(q.Mail,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:a.email})]}),a.phoneNumber&&(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(s.Phone,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:a.phoneNumber})]})]})}),(0,b.jsx)(j.TableCell,{children:(g=a.role,(0,b.jsx)(c.Badge,{variant:"default",className:{SUPER_ADMIN:"bg-red-500",ADMIN:"bg-purple-500",INSTRUCTOR:"bg-blue-500",MODERATOR:"bg-orange-500",STUDENT:"bg-green-500"}[g]||"bg-gray-500",children:g}))}),(0,b.jsx)(j.TableCell,{children:"ACTIVE"===a.isActive?(0,b.jsx)(c.Badge,{variant:"default",className:"bg-green-500",children:"Active"}):(0,b.jsx)(c.Badge,{variant:"destructive",children:"Disabled"})}),(0,b.jsx)(j.TableCell,{children:a.isVerified?(0,b.jsx)(c.Badge,{variant:"default",className:"bg-blue-500",children:"Verified"}):(0,b.jsx)(c.Badge,{variant:"outline",children:"Unverified"})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.authOptions.map((a,d)=>(0,b.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:a.provider},d))})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(n.Calendar,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:(0,m.format)(new Date(a.createdAt),"MMM dd, yyyy")})]})}),(0,b.jsx)(j.TableCell,{children:"DISABLED"===a.isActive?(0,b.jsx)("div",{children:(0,b.jsx)(c.Badge,{variant:"destructive",children:"Disabled"})}):(0,b.jsx)("div",{children:(0,b.jsx)(c.Badge,{variant:"outline",children:"Enabled"})})}),(0,b.jsx)(j.TableCell,{children:a.isDeleted?(0,b.jsx)("div",{children:(0,b.jsx)(c.Badge,{variant:"destructive",children:"Deleted"})}):(0,b.jsx)("div",{children:(0,b.jsx)(c.Badge,{variant:"outline",children:"Active"})})}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsxs)(f.DropdownMenu,{children:[(0,b.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(r.default,{className:"h-4 w-4"})]})}),(0,b.jsxs)(f.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(f.DropdownMenuLabel,{children:"Actions"}),(0,b.jsxs)(f.DropdownMenuItem,{onClick:()=>{var b;return b=a.uid,void(navigator.clipboard.writeText(b),A.toast.success("User ID copied to clipboard"))},children:[(0,b.jsx)(p.Eye,{className:"mr-2 h-4 w-4"}),"Copy User ID"]}),(0,b.jsx)(f.DropdownMenuSeparator,{}),(0,b.jsx)(f.DropdownMenuItem,{onClick:()=>T(a._id,a.isActive),disabled:B,children:"ACTIVE"===a.isActive?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x,{className:"mr-2 h-4 w-4"}),"Disable User"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.UserCheck,{className:"mr-2 h-4 w-4"}),"Enable User"]})}),!a.isVerified&&(0,b.jsxs)(f.DropdownMenuItem,{onClick:()=>U(a.uid),disabled:B,children:[(0,b.jsx)(u.Shield,{className:"mr-2 h-4 w-4"}),"Verify User"]}),(0,b.jsx)(f.DropdownMenuSeparator,{}),(0,b.jsx)(f.DropdownMenuItem,{onClick:()=>{a.isDeleted?W(a._id):V(a._id,`${a.firstName} ${a.lastName}`,a.isDeleted)},className:"text-red-600 focus:text-red-600",disabled:B,children:a.isDeleted?(0,b.jsxs)(b.Fragment,{children:[" ",(0,b.jsx)(o.CheckCircle,{className:"mr-2 h-4 w-4"}),"Active User"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Trash2,{className:"mr-2 h-4 w-4"}),"Delete User"]})})]})]})})]},a._id)})})]})}),R&&R.totalPages>1&&(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(h.Pagination,{children:(0,b.jsxs)(h.PaginationContent,{children:[(0,b.jsx)(h.PaginationItem,{children:(0,b.jsx)(h.PaginationPrevious,{onClick:()=>S(Math.max(1,R.page-1)),className:1===R.page?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,R.totalPages)},(a,c)=>{let d;return d=R.totalPages<=5||R.page<=3?c+1:R.page>=R.totalPages-2?R.totalPages-4+c:R.page-2+c,(0,b.jsx)(h.PaginationItem,{children:(0,b.jsx)(h.PaginationLink,{onClick:()=>S(d),isActive:d===R.page,className:"cursor-pointer",children:d})},d)}),R.totalPages>5&&R.page<R.totalPages-2&&(0,b.jsx)(h.PaginationItem,{children:(0,b.jsx)(h.PaginationEllipsis,{})}),(0,b.jsx)(h.PaginationItem,{children:(0,b.jsx)(h.PaginationNext,{onClick:()=>S(Math.min(R.totalPages,R.page+1)),className:R.page===R.totalPages?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}),(0,b.jsx)(e.ConfirmationModal,{isOpen:I,onClose:()=>{J(!1),L(null)},onConfirm:X,title:"Delete User",description:`Are you sure you want to delete ${K?.name}? This action cannot be undone and will permanently remove the user account and all associated data.`,confirmText:"Delete User",cancelText:"Cancel",isLoading:B,variant:"destructive"})]})})}}];

//# sourceMappingURL=src_app_%28dashboard%29_admin-dashboard_users_page_tsx_3790f3e9._.js.map