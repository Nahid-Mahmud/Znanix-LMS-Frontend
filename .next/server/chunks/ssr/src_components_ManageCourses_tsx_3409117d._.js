module.exports=[707843,a=>{"use strict";a.s(["default",()=>B],707843);var b=a.i(669720),c=a.i(786304),d=a.i(699570),e=a.i(383117),f=a.i(866718),g=a.i(882524),h=a.i(580701),i=a.i(206015),j=a.i(785259),k=a.i(712944),l=a.i(773608),m=a.i(825570),n=a.i(832281),o=a.i(390512),p=a.i(515542),q=a.i(310048),r=a.i(578945),s=a.i(118995),t=a.i(318618);let u=(0,a.i(51827).default)("star-off",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var v=a.i(765208),w=a.i(537771),x=a.i(102796),y=a.i(570342),z=a.i(803749),A=a.i(229611);function B(){let[a,B]=(0,A.useState)({page:1,limit:10}),[C,D]=(0,A.useState)({search:"",status:"all",featured:"all",published:"all"}),[E,F]=(0,A.useState)(""),[G,H]=(0,A.useState)(!1),[I,J]=(0,A.useState)(null);(0,A.useEffect)(()=>{let a=setTimeout(()=>{D(a=>({...a,search:E})),B(a=>({...a,page:1}))},500);return()=>clearTimeout(a)},[E]);let K=(()=>{let b={...a};return C.search&&(b.searchTerm=C.search),"all"!==C.status&&("true"===C.status?b.approved=!0:"pending"===C.status?(b.approved=!1,b.approvalRequest=!0):"draft"===C.status&&(b.approved=!1,b.approvalRequest=!1)),"all"!==C.featured&&(b.featured="true"===C.featured),"all"!==C.published&&(b.published="published"===C.published?"PUBLISHED":"DRAFT"),b})(),{data:L,isLoading:M,error:N}=(0,k.useGetAllCoursesQuery)(K),[O,{isLoading:P}]=(0,k.useUpdateCourseMutation)(),[Q,{isLoading:R}]=(0,k.useDeleteCourseMutation)(),S=L?.data||[],T=L?.meta,U=b=>{B({...a,page:b})},V=async a=>{try{await O({id:a,data:{approved:!0,approvalRequest:!1}}).unwrap(),console.log("Course approved successfully")}catch(a){console.error("Failed to approve course:",a)}},W=async a=>{try{await O({id:a,data:{approvalRequest:!0}}).unwrap(),console.log("Approval requested successfully")}catch(a){console.error("Failed to request approval:",a)}},X=async(a,b)=>{try{await O({id:a,data:{featured:!b}}).unwrap(),console.log(`Course ${!b?"set as":"removed from"} featured successfully`)}catch(a){console.error("Failed to toggle featured status:",a)}},Y=async(a,b)=>{try{await O({id:a,data:{published:"PUBLISHED"===b?"DRAFT":"PUBLISHED"}}).unwrap(),console.log(`Course ${"PUBLISHED"===b?"unpublished":"published"} successfully`)}catch(a){console.error("Failed to toggle publish status:",a)}},Z=async a=>{J(a),H(!0)},$=async()=>{if(I)try{await Q(I).unwrap(),H(!1),J(null)}catch(a){console.error("Failed to delete course:",a)}};return M?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"text-lg",children:"Loading courses..."})}):N?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"text-lg text-red-500",children:"Error loading courses"})}):(0,b.jsx)(j.TooltipProvider,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Courses"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Total: ",T?.total||0," courses"]}),(0,b.jsxs)("span",{children:["Page ",T?.page||1," of ",T?.totalPages||1]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-muted/30 rounded-lg",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative max-w-sm",children:[(0,b.jsx)(r.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"Search courses...",value:E,onChange:a=>{F(a.target.value)},className:"pl-10 pr-10"}),E&&(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0 text-muted-foreground hover:text-foreground",onClick:()=>F(""),children:(0,b.jsx)(x.X,{className:"h-4 w-4"})}),E!==C.search&&E&&(0,b.jsx)("div",{className:"absolute -bottom-1 left-0 h-0.5 w-full bg-blue-500 animate-pulse"})]})}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)(h.Select,{value:C.published,onValueChange:b=>{D({...C,published:b,status:"all",featured:"all"}),B({...a,page:1})},children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Published"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(h.SelectItem,{value:"published",children:"Published"}),(0,b.jsx)(h.SelectItem,{value:"draft",children:"Draft"})]})]})})]})," ",(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{className:"w-12",children:"#"}),(0,b.jsx)(i.TableHead,{children:"Course"}),(0,b.jsx)(i.TableHead,{children:"Instructor"}),(0,b.jsx)(i.TableHead,{children:"Price"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Published"}),(0,b.jsx)(i.TableHead,{children:"Featured"}),(0,b.jsx)(i.TableHead,{children:"Students"}),(0,b.jsx)(i.TableHead,{children:"Created"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(i.TableBody,{children:0===S.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:10,className:"text-center py-8",children:"No courses found"})}):S.map((a,e)=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{className:"font-medium",children:((T?.page||1)-1)*(T?.limit||10)+e+1}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(y.default,{height:48,width:48,src:a.thumbnail,alt:a.name,className:"w-12 h-12 rounded-md object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground truncate max-w-48",children:a.description})]})]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(y.default,{height:32,width:32,src:a.instructor.profilePicture,alt:`${a.instructor.firstName} ${a.instructor.lastName}`,className:"w-8 h-8 rounded-full object-cover"}),(0,b.jsxs)("span",{className:"text-sm",children:[a.instructor.firstName," ",a.instructor.lastName]})]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(o.DollarSign,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"font-medium",children:a.isFree?"Free":`$${a.finalPrice}`}),a.discount>0&&(0,b.jsxs)("span",{className:"text-sm text-muted-foreground line-through",children:["$",a.price]})]})}),(0,b.jsx)(i.TableCell,{children:a.approved?(0,b.jsx)(c.Badge,{variant:"default",className:"bg-green-500",children:"Approved"}):a.approvalRequest?(0,b.jsx)(c.Badge,{variant:"secondary",className:"bg-yellow-500",children:"Pending"}):(0,b.jsx)(c.Badge,{variant:"outline",children:"Draft"})}),(0,b.jsx)(i.TableCell,{children:"PUBLISHED"===a.published?(0,b.jsx)(c.Badge,{variant:"default",className:"bg-blue-500",children:"Published"}):(0,b.jsx)(c.Badge,{variant:"outline",children:"Draft"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[a.featured?(0,b.jsx)(t.Star,{className:"w-4 h-4 text-yellow-500 fill-current"}):(0,b.jsx)(u,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-sm",children:a.featured?"Yes":"No"})]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(w.Users,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:a.totalEnrolledStudents})]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm",children:(0,l.format)(new Date(a.createdAt),"MMM dd, yyyy")})]})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,b.jsxs)(j.Tooltip,{children:[(0,b.jsx)(j.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,b.jsx)(z.default,{target:"_blank noreferrer noopener",href:`/courses/${a.slug}`,children:(0,b.jsx)(p.Eye,{className:"w-4 h-4"})})})}),(0,b.jsx)(j.TooltipContent,{children:(0,b.jsx)("p",{children:"View Course"})})]}),!a.approved&&!a.approvalRequest&&(0,b.jsxs)(j.Tooltip,{children:[(0,b.jsx)(j.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>W(a._id),className:"text-orange-600 hover:text-orange-700",disabled:P,children:(0,b.jsx)(s.Send,{className:"w-4 h-4"})})}),(0,b.jsx)(j.TooltipContent,{children:(0,b.jsx)("p",{children:"Request Approval"})})]}),!a.approved&&a.approvalRequest&&(0,b.jsxs)(j.Tooltip,{children:[(0,b.jsx)(j.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>V(a._id),className:"text-green-600 hover:text-green-700",disabled:P,children:(0,b.jsx)(n.CheckCircle,{className:"w-4 h-4"})})}),(0,b.jsx)(j.TooltipContent,{children:(0,b.jsx)("p",{children:"Approve Course"})})]}),(0,b.jsxs)(j.Tooltip,{children:[(0,b.jsx)(j.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>X(a._id,a.featured),className:a.featured?"text-yellow-600":"text-gray-600",disabled:P,children:a.featured?(0,b.jsx)(t.Star,{className:"w-4 h-4"}):(0,b.jsx)(u,{className:"w-4 h-4"})})}),(0,b.jsx)(j.TooltipContent,{children:(0,b.jsx)("p",{children:a.featured?"Remove from Featured":"Set as Featured"})})]}),(0,b.jsxs)(j.Tooltip,{children:[(0,b.jsx)(j.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>Y(a._id,a.published),className:"PUBLISHED"===a.published?"text-blue-600":"text-gray-600",disabled:P,children:"PUBLISHED"===a.published?(0,b.jsx)(q.FileText,{className:"w-4 h-4"}):(0,b.jsx)(s.Send,{className:"w-4 h-4"})})}),(0,b.jsx)(j.TooltipContent,{children:(0,b.jsx)("p",{children:"PUBLISHED"===a.published?"Unpublish Course":"Publish Course"})})]}),(0,b.jsxs)(j.Tooltip,{children:[(0,b.jsx)(j.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>Z(a._id),className:"text-red-600 hover:text-red-700",disabled:R,children:(0,b.jsx)(v.Trash2,{className:"w-4 h-4"})})}),(0,b.jsx)(j.TooltipContent,{children:(0,b.jsx)("p",{children:"Delete Course"})})]})]})})]},a._id))})]})}),T&&T.totalPages>1&&(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(g.Pagination,{children:(0,b.jsxs)(g.PaginationContent,{children:[(0,b.jsx)(g.PaginationItem,{children:(0,b.jsx)(g.PaginationPrevious,{onClick:()=>U(Math.max(1,T.page-1)),className:1===T.page?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,T.totalPages)},(a,c)=>{let d;return d=T.totalPages<=5||T.page<=3?c+1:T.page>=T.totalPages-2?T.totalPages-4+c:T.page-2+c,(0,b.jsx)(g.PaginationItem,{children:(0,b.jsx)(g.PaginationLink,{onClick:()=>U(d),isActive:d===T.page,className:"cursor-pointer",children:d})},d)}),T.totalPages>5&&T.page<T.totalPages-2&&(0,b.jsx)(g.PaginationItem,{children:(0,b.jsx)(g.PaginationEllipsis,{})}),(0,b.jsx)(g.PaginationItem,{children:(0,b.jsx)(g.PaginationNext,{onClick:()=>U(Math.min(T.totalPages,T.page+1)),className:T.page===T.totalPages?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}),(0,b.jsx)(e.ConfirmationModal,{isOpen:G,onClose:()=>{H(!1),J(null)},onConfirm:$,title:"Delete Course",description:"Are you sure you want to delete this course? This action cannot be undone and will permanently remove all course content, student enrollments, and related data.",confirmText:"Delete Course",cancelText:"Cancel",isLoading:R,variant:"destructive"})]})})}}];

//# sourceMappingURL=src_components_ManageCourses_tsx_3409117d._.js.map